问题背景
1. 常用搭载 Android OS 的硬件设备
    - 确保常用硬件存在
2. 正常的 Android OS 没有被阉割
    - 确保驱动都在，可以调用需要的硬件模块



我们要做什么？
- 用户数据采集
    - 事实上我们可以把用户排除在外
    - 我们要做 Android OS 及其运行硬件的和硬件运行环境的数据采集
        - 这件事做完了，再结合上硬件和 OS 的使用者:"用户"
- 所以我们要做的是 Android OS 的数据采集

要采集数据，采集数据这件事情就要依赖某块代码来完成。我们能否为一个 apk 注入目的代码呢？
- 这一点我们是不知道的
    - 不过从加固这件事来说能在一处对应用代码进行截断，就能在另一处对应用代码进行截断。
    - 所以我们认为通过加固将代码注入到指定位置是可行的。
- 如果这可行的话我们就可以为 apk 注入一个进程这个进程或者通过 C++ 或者通过 Java 运行我们自己的逻辑
    - 这个被注入的进程和单独运行的一个 APP 理论上是没有任何区别的(如果不考虑加固产品的用户体验的话)

现在我们已经可以在 Android 系统上运行一个我们自己的 app 了。
- 下一步要考虑的就是我们可以获取什么数据了。
    - 就像赚钱的方法都写在刑法上一样
    - 我们可获取的敏感数据很多都在 Android 的权限列表中。(在权限允许的情况下一个app可以获得如下权限)
        - 允许程序读取用户的日程信息
        - 写入日程,但不可读取
        - 允许访问摄像头进行拍照
        - 允许应用访问联系人通讯录信息
        - 写入联系人,但不可读取
        - 访问GMail账户列表
        - 通过GPS芯片接收卫星的定位信息,定位精度达10米以内
        - 通过WiFi或移动基站的方式获取用户错略的经纬度信息,定位精度大概误差在30~1500米
        - 录制声音通过手机或耳机的麦克
        - 访问电话状态
        - 允许程序从非系统拨号器里输入电话号码
        - 允许应用读取用户的通话记录
        - 允许程序使用SIP视频服务
        - 允许程序监视,修改或放弃播出电话
        - 发送短信
        - 接收短信
        - 读取短信内容
        - 接收WAP PUSH信息
        - 接收彩信
        - 允许应用读取外部存储设备
        - 允许程序写入外部存储,如SD卡上写文件
        - 允许应用写(但是不允许读取)用户的通话记录。——如果您应用的 minSdkVersion 和 targetSdkVersion 都小于等于 15 如果您的应用申请了 android.permission.WRITE_CONTACTS 那么您的应用默认具有了本权限。
        - 允许应用向系统添加语音邮件。
        - 允许应用访问体传感器的数据，体传感器用来测量用户体内正在发生的情况，例如心跳。


我们想的极端一点假设我们的应用获取了 root 权限，我们就可以获取一切的数据
- **这里有一个小问题，具有了 root 权限是否还需要申请权限列表**
- 这种情况下能够限制我们的唯一一个条件就是，用户是否通过手机操作了自己的某些数据。(一旦操作了我们即可获取)
- 那我们不妨盘点一下一个手机上到底都有什么数据。

    - 基础电话功能

        1. 电话
        2. 短信
        3. 日历(日程)
        4. 记事本

    - 网络功能
    
        5. 代理一切流量
            - 应用内用自定义协议的通讯数据会有一点小麻烦，不过如果想，直接共享手机屏幕，要获取数据也并非不可行。
        5.1. WIFI/流量 网络状态

    - 手机硬件(要获取这些的前提是手机具备这些硬件)

        6. 摄像头
        7. 陀螺仪
        8. GPS
        9. 屏幕
        10. 按键
        11. 体传感器(可测量心率)
        12. 闪光灯
        13. 听筒
        14. 手机品牌、型号、串号
        15. SIM 卡信息状态

    - 其他应用数据

        14. 当前安装应用列表
        15. 当前运行的应用
    
    - Google 没提供足够的 API 需要开发数据收集

        16. 操作习惯
            - 用户应用使用时间
            - 一个时间段内对一个应用所做的操作

如果没有 root 权限上述所说的信息绝大部分也是可以获得的
- 此时唯一的限制就是权限。

我们也来了解下其他信息收集厂商所收集的信息。
- 友盟(最多最全)
- flurry
- localytics(核心在，不够全，开源)
- https://www.zhihu.com/question/19594075

粗略统计了以下我们可以拿到几乎一切的数据，限制就在于权限。

我们加固注入的可行性

现在要做的事情是看看友盟等一众厂家都收集什么数据

匹配这些数据具体都有什么限制







网络访问权限是统计所必须的权限，否则任何统计都将失去意义。



----

下一步考虑一下别的应用的数据的读取。
- root 一个设备
    - 静默安装
    - 静默卸载

- 非 Root 情况下
    - 一个 app 公开信息[需要逐个进行统计(非私有目录)，依赖于目标APP的实现原理：数据是否外露]
    - 设备流量统计
    - 耗电统计
    - 应用列表
    - 当前正在运行的应用(列表)
        - 当前正与用户交互的app
        - 一个 APP 的活跃度

====

接下来我们要考虑如何 root 一个 Android 设备